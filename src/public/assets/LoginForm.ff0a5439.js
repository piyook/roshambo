import{_ as v,A as _,g as h,M as f,S as E,r as M,o as d,c,f as g,a as w,w as i,T as b,b as e,h as m,v as u,i as y,j as A,e as s,p as S,d as x}from"./index.abbdf11b.js";const I={props:["mode"],data(){return{name:null,email:null,password:null,password_confirmation:null,error:null}},methods:{submitForm(){this.Spinner(!0);let n={name:this.name,email:this.email,password:this.password,password_confirmation:this.password_confirmation};if(this.mode=="register"){this.error=null,_.registerUser(n).then(()=>this.$router.push({name:"Authorized"})).catch(async o=>{this.Spinner(!1),this.error=h(o),await f("regErrorModal")&&this.$router.push({name:"Login"})});return}_.login(n).then(()=>{this.$store.dispatch("auth/setGuest",{value:!1}),this.$router.push({name:"Authorized"})}).catch(async o=>{this.Spinner(!1),this.error=h(o),await f("loginErrorModal")&&this.$router.push({name:"Register"})})},Spinner:E},computed:{formMode(){return this.mode==="register"},loginErrorModal(){return this.$store.getters["modal/isModalVisible"]==="loginErrorModal"},regErrorModal(){return this.$store.getters["modal/isModalVisible"]==="regErrorModal"}},mounted(){this.Spinner(!1)},unmounted(){this.Spinner(!1)}},r=n=>(S("data-v-0bd3d719"),n=n(),x(),n),T=s("Login Error"),N=s(" Email Or Password Not Recognised."),P=r(()=>e("br",null,null,-1)),V=s(" Try Again or Register as a New User? "),L=s("REGISTER"),R=s("TRY AGAIN"),B=s("Registration Error"),U=s(" Email Taken or Passwords Dont Match. "),k=r(()=>e("br",null,null,-1)),C=s(" Please Complete ALL fields and Try Again."),G=r(()=>e("br",null,null,-1)),F=s(" Go To Login or Try Again? "),O=s("LOGIN"),j=s("TRY AGAIN"),z={key:0,class:"form-group"},D=r(()=>e("label",{for:"exampleInputEmail1"},"Choose A Public User Name",-1)),H=r(()=>e("small",{class:"form-text text-muted"},"Only your username is shown in hiscore tables",-1)),Y={class:"form-group"},q=r(()=>e("label",{for:"exampleInputEmail1"},"Email address",-1)),J={class:"form-group"},K=r(()=>e("label",{for:"exampleInputPassword1"},"Password",-1)),Q={key:1,class:"form-group"},W=r(()=>e("label",{for:"exampleInputPassword1"},"Confirm Password",-1)),X=r(()=>e("div",{class:"row justify-content-center"},[e("button",{type:"submit",class:"btn btn-primary my-5"}," Submit ")],-1));function Z(n,o,$,ee,a,l){const p=M("alert-modal");return d(),c("div",null,[(d(),g(b,{to:"body"},[w(p,{isActive:l.loginErrorModal},{title:i(()=>[T]),yesButton:i(()=>[L]),cancelButton:i(()=>[R]),default:i(()=>[N,P,V]),_:1},8,["isActive"])])),(d(),g(b,{to:"body"},[w(p,{isActive:l.regErrorModal},{title:i(()=>[B]),yesButton:i(()=>[O]),cancelButton:i(()=>[j]),default:i(()=>[U,k,C,G,F]),_:1},8,["isActive"])])),e("form",{onSubmit:o[4]||(o[4]=A((...t)=>l.submitForm&&l.submitForm(...t),["prevent"]))},[l.formMode?(d(),c("div",z,[D,m(e("input",{type:"name",class:"form-control","aria-describedby":"nameHelp",placeholder:"Enter a username","onUpdate:modelValue":o[0]||(o[0]=t=>a.name=t)},null,512),[[u,a.name]]),H])):y("",!0),e("div",Y,[q,m(e("input",{type:"email",class:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email","onUpdate:modelValue":o[1]||(o[1]=t=>a.email=t)},null,512),[[u,a.email]])]),e("div",J,[K,m(e("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":o[2]||(o[2]=t=>a.password=t)},null,512),[[u,a.password]])]),l.formMode?(d(),c("div",Q,[W,m(e("input",{type:"password",class:"form-control",placeholder:"Retype Password","onUpdate:modelValue":o[3]||(o[3]=t=>a.password_confirmation=t)},null,512),[[u,a.password_confirmation]])])):y("",!0),X],32)])}var se=v(I,[["render",Z],["__scopeId","data-v-0bd3d719"]]);export{se as L};
